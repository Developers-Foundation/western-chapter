$(document).ready(function(){Parse.initialize("df-recruit-db");Parse.serverURL="https://df-recruit-db.herokuapp.com/parse";$("#formSubmitButton").click(function(b){b.preventDefault();formSubmit(this);return false});$("#resumeA").click(function(b){b.preventDefault();$("#fileToUpload").click();return false});$("#fileToUpload").change(function(b){fileSubmit(this)});var a=true;setInterval(function(){var b=document.getElementById("lol");if(b){if(a){b.innerHTML="_";a=false}else{b.innerHTML=" ";a=true}}},700)});function fileSubmit(a){var b=a.value;var c=b.split("\\");if(c==""){c="resume"}a.parentNode.getElementsByClassName("fileName")[0].innerHTML=c[c.length-1];uploadFile(a);return false}function uploadFile(a){var b=a.files[0];Parse.User.logIn("user","pass").then(function(){var f=Parse.Promise.as();if(b.size>10485759){console.log("File too big");return Parse.Promise.error("File size too large.")}var d=Parse.Object.extend("Resume");var e=new d();var c=new Parse.File(b.name,b);f=f.then(function(){return c.save()}).then(function(g){var h=g.url();h=(h.indexOf("https")==0)?h:"https"+h.substr(4);e.set("resume",c);e.set("link",h);return e.save()}).then(function(g){a.dataset.parsedb=g.id},function(g){console.log(g)});return f},function(c){console.log(c)})}function formSubmit(h){var a=document.getElementById("name").value,i=document.getElementById("email").value,f=document.getElementById("program").value,g=document.getElementById("position").options[document.getElementById("position").selectedIndex].value,b=document.getElementById("portfolioUrl").value,c=document.getElementById("fileToUpload").dataset.parsedb,d=document.getElementById("about").value,e=document.getElementById("why").value;Parse.User.logIn("user","pass").then(function(){var j=Parse.Object.extend("Applications");var k=new j();k.set("name",a);k.set("email",i);k.set("program",f);k.set("portfolio",b);k.set("resume",c);k.set("about",d);k.set("why",e);return k.save()}).then(function(o){console.log("success");console.log(h);document.getElementById("theForm").parentNode.innerHTML="<div style='text-align: left; margin-top: 100px'><h4 id='thank'>Thank You for Submitting your Application</h4><br><p id='msg'>We will get back to you as soon as possible <span id='lol'>_</span></p><p class='text'></p></div>";var k=["If you have any queries,","please direct them to","harrison@developersfoundation.ca","or just email me to chat :)"];var m=document.querySelector(".text");var n=new TextScramble(m);var j=0;var l=function l(){n.setText(k[j]).then(function(){setTimeout(l,1200)});j=(j+1)%k.length};l()},function(j){console.log("error");console.log(j)})}function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}var TextScramble=function(){function a(e){_classCallCheck(this,a);this.el=e;this.chars="!<>-_\\/[]{}â€”=+*^?#________";this.update=this.update.bind(this)}a.prototype.setText=function c(j){var k=this;var n=this.el.innerText;var f=Math.max(n.length,j.length);var o=new Promise(function(i){return k.resolve=i});this.queue=[];for(var h=0;h<f;h++){var l=n[h]||"";var m=j[h]||"";var e=Math.floor(Math.random()*40);var g=e+Math.floor(Math.random()*40);this.queue.push({from:l,to:m,start:e,end:g})}cancelAnimationFrame(this.frameRequest);this.frame=0;this.update();return o};a.prototype.update=function d(){var h="";var f=0;for(var k=0,g=this.queue.length;k<g;k++){var p=this.queue[k];var m=p.from;var o=p.to;var e=p.start;var j=p.end;var l=p.theChar;if(this.frame>=j){f++;h+=o}else{if(this.frame>=e){if(!l||Math.random()<0.28){l=this.randomChar();this.queue[k].theChar=l}h+='<span class="dud">'+l+"</span>"}else{h+=m}}}this.el.innerHTML=h;if(f===this.queue.length){this.resolve()}else{this.frameRequest=requestAnimationFrame(this.update);this.frame++}};a.prototype.randomChar=function b(){return this.chars[Math.floor(Math.random()*this.chars.length)]};return a}();